if (device.desktop()) {
  window.Tapcentive = angular.module('Tapcentive', ['ngSanitize', 'ui.router', 'btford.socket-io', 'tap.controllers', 'tap.directives']);
} else {
  window.Tapcentive = angular.module("Tapcentive", ["ionic", "btford.socket-io", "tap.controllers", 'tap.directives']).run(function($ionicPlatform) {
    return $ionicPlatform.ready(function() {
      if (window.StatusBar) {
        return StatusBar.styleDefault();
      }
    });
  });
}

Tapcentive.config(function($stateProvider, $urlRouterProvider, $locationProvider, $httpProvider) {
  $stateProvider.state('app', {
    url: '',
    abstract: true,
    controller: 'AppCtrl',
    templateUrl: 'menu.html'
  }).state('app.home', {
    url: '/',
    views: {
      menuContent: {
        controller: 'HomeCtrl',
        templateUrl: 'home.html'
      }
    }
  }).state('app.docs', {
    url: '/docs',
    views: {
      menuContent: {
        controller: 'DocsCtrl',
        templateUrl: 'docs/index.html'
      }
    }
  }).state('app.about', {
    url: '/about',
    views: {
      menuContent: {
        controller: 'AboutCtrl',
        templateUrl: 'about.html'
      }
    }
  }).state('app.how', {
    url: '/how',
    views: {
      menuContent: {
        controller: 'HowCtrl',
        templateUrl: 'how.html'
      }
    }
  }).state('app.platform-touchpoints', {
    url: '/beacon-ble-nfc-connected-touchpoint',
    views: {
      menuContent: {
        controller: 'PlatformTouchpointCtrl',
        templateUrl: 'platform-touchpoints.html'
      }
    }
  }).state('app.platform-mobile', {
    url: '/beacon-ble-nfc-mobile-api-sdk',
    views: {
      menuContent: {
        controller: 'PlatformMobileCtrl',
        templateUrl: 'platform-mobile.html'
      }
    }
  }).state('app.platform-manager', {
    url: '/tapcentive-beacon-nfc-cloud-manager',
    views: {
      menuContent: {
        controller: 'PlatformManagerCtrl',
        templateUrl: 'platform-manager.html'
      }
    }
  }).state('app.blog', {
    url: '/blog',
    views: {
      menuContent: {
        controller: 'BlogCtrl',
        templateUrl: 'blog.html'
      }
    }
  }).state('app.press', {
    url: '/press',
    views: {
      menuContent: {
        controller: 'PressCtrl',
        templateUrl: 'press.html'
      }
    }
  }).state('app.contact', {
    url: '/contact',
    views: {
      menuContent: {
        controller: 'ContactCtrl',
        templateUrl: 'contact.html'
      }
    }
  }).state('app.doc', {
    url: '/docs/:permalink',
    views: {
      menuContent: {
        controller: 'DocCtrl',
        templateUrl: 'docs/show.html'
      }
    }
  }).state('app.step', {
    url: '/docs/:permalink/:step',
    views: {
      menuContent: {
        controller: 'DocCtrl',
        templateUrl: 'docs/show.html'
      }
    }
  });
  $urlRouterProvider.otherwise("/");
  return $httpProvider.interceptors.push(function() {
    return {
      request: function(config) {
        var type;
        if (config.url.match(/\.html$/) && !config.url.match(/^shared\//)) {
          if (device.tablet()) {
            type = 'tablet';
          } else if (device.mobile()) {
            type = 'mobile';
          } else {
            type = 'desktop';
          }
          config.url = "/" + type + "/" + config.url;
        }
        return config;
      }
    };
  });
});

Tapcentive.run(function($state) {
  return $state.go('app.home');
});

Tapcentive.run(function($rootScope, copy) {
  return $rootScope.copy = copy;
});

Tapcentive.factory('Socket', function(socketFactory) {
  return socketFactory();
});

Tapcentive.factory('Docs', function(Socket) {
  var service;
  service = {
    list: [],
    find: function(permalink) {
      return _.find(service.list, function(doc) {
        return doc.permalink === permalink;
      });
    }
  };
  Socket.on('docs', function(docs) {
    return service.list = docs;
  });
  return service;
});

Tapcentive.controller('HomeCtrl', function($scope) {});

Tapcentive.controller("HomeTapCtrl", function($scope) {
  $scope.items = new Array();
  $scope.items.push({
    src: "img/gif/report.gif"
  });
  $scope.items.push({
    src: "http://malsup.github.com/images/beach2.jpg"
  });
  $scope.items.push({
    src: "http://malsup.github.com/images/beach3.jpg"
  });
  return $scope.items.push({
    src: "http://malsup.github.com/images/beach4.jpg"
  });
});

Tapcentive.controller('AboutCtrl', function($scope) {});

Tapcentive.controller('HowCtrl', function($scope) {});

Tapcentive.controller('AppCtrl', function($scope) {});

Tapcentive.controller('PlatformManagerCtrl', function($scope) {});

Tapcentive.controller('PlatformTouchpointCtrl', function($scope) {});

Tapcentive.controller('PlatformMobileCtrl', function($scope) {});

Tapcentive.controller('PressCtrl', function($scope) {});

Tapcentive.controller('ContactCtrl', function($scope) {});

Tapcentive.controller('GetStartedCtrl', function($scope) {});

Tapcentive.controller('DevelopersCtrl', function($scope) {});

Tapcentive.controller('DeveloperCenterCtrl', function($scope) {});

Tapcentive.controller('DocsCtrl', function($scope, Docs) {
  return $scope.$watch((function() {
    return Docs.list;
  }), function() {
    return $scope.docs = Docs.list;
  });
});

Tapcentive.controller('DocCtrl', function($scope, $sce, $stateParams, $timeout, Docs) {
  $scope.index = $stateParams.step ? $stateParams.step - 1 : 0;
  $scope.$watch((function() {
    return Docs.list;
  }), function() {
    $scope.doc = Docs.find($stateParams.permalink);
    if ($scope.doc) {
      $scope.step = $scope.doc.steps[$scope.index];
      $scope.step.url = $sce.trustAsResourceUrl($scope.step.url);
      if ($scope.step.type === 'dialog') {
        $scope.messageIndex = 0;
        $scope.messages = [];
        return $timeout($scope.nextMessage, 1000);
      }
    }
  });
  return $scope.hasMoreSteps = function() {
    if ($scope.step) {
      return $scope.step.index < $scope.doc.steps.length;
    }
  };
});

Tapcentive.directive('cycle', function() {
  return {
    restrict: 'A',
    priority: 1001,
    link: function(scope, element, attrs) {
      setTimeout((function() {
        $(element).cycle({
          fx: 'fade',
          speed: 'fast',
          timeout: 0,
          next: '#next2',
          prev: '#prev2'
        });
      }), 0);
    }
  };
});

angular.module("tap.controllers", []);

angular.module("tap.directives", []).directive("device", function() {
  return {
    restrict: "A",
    link: function() {
      return device.init();
    }
  };
}).service('copy', function($sce) {
  var copy, trustValues;
  copy = {
    about: {
      heading: "We're <strong>tapping</strong> into the future",
      sub_heading: "Tapcentive was created by a team that has lived the mobile commerce revolution from the earliest days of mCommerce with WAP, to leading the charge in mobile payments and services with NFC worldwide.",
      copy: "<p>For us, mobile commerce has always been about much more than payment:  marketing, promotions, product content, and loyalty, all come to life inside a mobile phone. Mobile commerce really gets interesting when it bridges the digital and physical worlds.</p><p>Our goal at Tapcentive is to create a state-of-the-art mobile engagement platform that enables marketers and developers to create entirely new customer experiences in physical locations – all with a minimum amount of technology development.</p><p>We think you’ll like what we’ve built so far. And just as mobile technology is constantly evolving, so is the Tapcentive platform. Give it a test drive today.</p>"
    },
    team: {
      heading: "",
      bios: {
        dave_role: "",
        dave_copy: ""
      }
    }
  };
  trustValues = function(values) {
    return _.each(values, function(val, key) {
      switch (typeof val) {
        case 'string':
          return $sce.trustAsHtml(val);
        case 'object':
          return trustValues(val);
      }
    });
  };
  trustValues(copy);
  return copy;
});

var $, cssId, head, link;

if (device.desktop()) {

} else if (device.mobile()) {
  $ = document;
  cssId = 'myCss';
  if (!$.getElementById(cssId)) {
    head = $.getElementsByTagName('head')[0];
    link = $.createElement('link');
    link.id = cssId;
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = 'https://code.ionicframework.com/1.0.0-beta.13/css/ionic.min.css';
    link.media = 'all';
    head.appendChild(link);
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJjb250cm9sbGVycy5jb2ZmZWUiLCJkaXJlY3RpdmVzLmNvZmZlZSIsImluaXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUcsTUFBTSxDQUFDLE9BQVAsQ0FBQSxDQUFIO0FBQ0UsRUFBQSxNQUFNLENBQUMsVUFBUCxHQUFvQixPQUFPLENBQUMsTUFBUixDQUFlLFlBQWYsRUFBNkIsQ0FBQyxZQUFELEVBQWUsV0FBZixFQUE0QixrQkFBNUIsRUFBZ0QsaUJBQWhELEVBQW1FLGdCQUFuRSxDQUE3QixDQUFwQixDQURGO0NBQUEsTUFBQTtBQUlFLEVBQUEsTUFBTSxDQUFDLFVBQVAsR0FBb0IsT0FBTyxDQUFDLE1BQVIsQ0FBZSxZQUFmLEVBQTZCLENBQUUsT0FBRixFQUFXLGtCQUFYLEVBQStCLGlCQUEvQixFQUFrRCxnQkFBbEQsQ0FBN0IsQ0FDbEIsQ0FBQyxHQURpQixDQUNiLFNBQUMsY0FBRCxHQUFBO1dBQ0gsY0FBYyxDQUFDLEtBQWYsQ0FBcUIsU0FBQSxHQUFBO0FBQ25CLE1BQUEsSUFBNEIsTUFBTSxDQUFDLFNBQW5DO2VBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBQSxFQUFBO09BRG1CO0lBQUEsQ0FBckIsRUFERztFQUFBLENBRGEsQ0FBcEIsQ0FKRjtDQUFBOztBQUFBLFVBU1UsQ0FBQyxNQUFYLENBQWtCLFNBQUMsY0FBRCxFQUFpQixrQkFBakIsRUFBcUMsaUJBQXJDLEVBQXdELGFBQXhELEdBQUE7QUFDaEIsRUFBQSxjQUNFLENBQUMsS0FESCxDQUNTLEtBRFQsRUFFSTtBQUFBLElBQUEsR0FBQSxFQUFLLEVBQUw7QUFBQSxJQUNBLFFBQUEsRUFBVSxJQURWO0FBQUEsSUFFQSxVQUFBLEVBQVksU0FGWjtBQUFBLElBR0EsV0FBQSxFQUFhLFdBSGI7R0FGSixDQU9FLENBQUMsS0FQSCxDQU9TLFVBUFQsRUFRSTtBQUFBLElBQUEsR0FBQSxFQUFLLEdBQUw7QUFBQSxJQUNBLEtBQUEsRUFDRTtBQUFBLE1BQUEsV0FBQSxFQUNFO0FBQUEsUUFBQSxVQUFBLEVBQVksVUFBWjtBQUFBLFFBQ0EsV0FBQSxFQUFhLFdBRGI7T0FERjtLQUZGO0dBUkosQ0FjRSxDQUFDLEtBZEgsQ0FjUyxVQWRULEVBZUk7QUFBQSxJQUFBLEdBQUEsRUFBSyxPQUFMO0FBQUEsSUFDQSxLQUFBLEVBQ0U7QUFBQSxNQUFBLFdBQUEsRUFDRTtBQUFBLFFBQUEsVUFBQSxFQUFZLFVBQVo7QUFBQSxRQUNBLFdBQUEsRUFBYSxpQkFEYjtPQURGO0tBRkY7R0FmSixDQXFCRSxDQUFDLEtBckJILENBcUJTLFdBckJULEVBc0JJO0FBQUEsSUFBQSxHQUFBLEVBQUssUUFBTDtBQUFBLElBQ0EsS0FBQSxFQUNFO0FBQUEsTUFBQSxXQUFBLEVBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxXQUFaO0FBQUEsUUFDQSxXQUFBLEVBQWEsWUFEYjtPQURGO0tBRkY7R0F0QkosQ0E0QkUsQ0FBQyxLQTVCSCxDQTRCUyxTQTVCVCxFQTZCSTtBQUFBLElBQUEsR0FBQSxFQUFLLE1BQUw7QUFBQSxJQUNBLEtBQUEsRUFDRTtBQUFBLE1BQUEsV0FBQSxFQUNFO0FBQUEsUUFBQSxVQUFBLEVBQVksU0FBWjtBQUFBLFFBQ0EsV0FBQSxFQUFhLFVBRGI7T0FERjtLQUZGO0dBN0JKLENBbUNFLENBQUMsS0FuQ0gsQ0FtQ1MsMEJBbkNULEVBb0NJO0FBQUEsSUFBQSxHQUFBLEVBQUssc0NBQUw7QUFBQSxJQUNBLEtBQUEsRUFDRTtBQUFBLE1BQUEsV0FBQSxFQUNFO0FBQUEsUUFBQSxVQUFBLEVBQVksd0JBQVo7QUFBQSxRQUNBLFdBQUEsRUFBYSwyQkFEYjtPQURGO0tBRkY7R0FwQ0osQ0EwQ0UsQ0FBQyxLQTFDSCxDQTBDUyxxQkExQ1QsRUEyQ0k7QUFBQSxJQUFBLEdBQUEsRUFBSyxnQ0FBTDtBQUFBLElBQ0EsS0FBQSxFQUNFO0FBQUEsTUFBQSxXQUFBLEVBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxvQkFBWjtBQUFBLFFBQ0EsV0FBQSxFQUFhLHNCQURiO09BREY7S0FGRjtHQTNDSixDQWlERSxDQUFDLEtBakRILENBaURTLHNCQWpEVCxFQWtESTtBQUFBLElBQUEsR0FBQSxFQUFLLHNDQUFMO0FBQUEsSUFDQSxLQUFBLEVBQ0U7QUFBQSxNQUFBLFdBQUEsRUFDRTtBQUFBLFFBQUEsVUFBQSxFQUFZLHFCQUFaO0FBQUEsUUFDQSxXQUFBLEVBQWEsdUJBRGI7T0FERjtLQUZGO0dBbERKLENBd0RFLENBQUMsS0F4REgsQ0F3RFMsVUF4RFQsRUF5REk7QUFBQSxJQUFBLEdBQUEsRUFBSyxPQUFMO0FBQUEsSUFDQSxLQUFBLEVBQ0U7QUFBQSxNQUFBLFdBQUEsRUFDRTtBQUFBLFFBQUEsVUFBQSxFQUFZLFVBQVo7QUFBQSxRQUNBLFdBQUEsRUFBYSxXQURiO09BREY7S0FGRjtHQXpESixDQStERSxDQUFDLEtBL0RILENBK0RTLFdBL0RULEVBZ0VJO0FBQUEsSUFBQSxHQUFBLEVBQUssUUFBTDtBQUFBLElBQ0EsS0FBQSxFQUNFO0FBQUEsTUFBQSxXQUFBLEVBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxXQUFaO0FBQUEsUUFDQSxXQUFBLEVBQWEsWUFEYjtPQURGO0tBRkY7R0FoRUosQ0FzRUUsQ0FBQyxLQXRFSCxDQXNFUyxhQXRFVCxFQXVFSTtBQUFBLElBQUEsR0FBQSxFQUFLLFVBQUw7QUFBQSxJQUNBLEtBQUEsRUFDRTtBQUFBLE1BQUEsV0FBQSxFQUNFO0FBQUEsUUFBQSxVQUFBLEVBQVksYUFBWjtBQUFBLFFBQ0EsV0FBQSxFQUFhLGNBRGI7T0FERjtLQUZGO0dBdkVKLENBNkVFLENBQUMsS0E3RUgsQ0E2RVMsU0E3RVQsRUE4RUk7QUFBQSxJQUFBLEdBQUEsRUFBSyxrQkFBTDtBQUFBLElBQ0EsS0FBQSxFQUNFO0FBQUEsTUFBQSxXQUFBLEVBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxTQUFaO0FBQUEsUUFDQSxXQUFBLEVBQWEsZ0JBRGI7T0FERjtLQUZGO0dBOUVKLENBb0ZFLENBQUMsS0FwRkgsQ0FvRlMsVUFwRlQsRUFxRkk7QUFBQSxJQUFBLEdBQUEsRUFBSyx3QkFBTDtBQUFBLElBQ0EsS0FBQSxFQUNFO0FBQUEsTUFBQSxXQUFBLEVBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxTQUFaO0FBQUEsUUFDQSxXQUFBLEVBQWEsZ0JBRGI7T0FERjtLQUZGO0dBckZKLENBQUEsQ0FBQTtBQUFBLEVBMkZFLGtCQUFrQixDQUFDLFNBQW5CLENBQTZCLEdBQTdCLENBM0ZGLENBQUE7U0E2RkUsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUEzQixDQUFnQyxTQUFBLEdBQUE7V0FDN0I7QUFBQSxNQUFBLE9BQUEsRUFBUyxTQUFDLE1BQUQsR0FBQTtBQUNQLFlBQUEsSUFBQTtBQUFBLFFBQUEsSUFBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQVgsQ0FBaUIsU0FBakIsQ0FBQSxJQUErQixDQUFBLE1BQU8sQ0FBQyxHQUFHLENBQUMsS0FBWCxDQUFpQixXQUFqQixDQUFuQztBQUNFLFVBQUEsSUFBRyxNQUFNLENBQUMsTUFBUCxDQUFBLENBQUg7QUFDRSxZQUFBLElBQUEsR0FBTyxRQUFQLENBREY7V0FBQSxNQUVLLElBQUcsTUFBTSxDQUFDLE1BQVAsQ0FBQSxDQUFIO0FBQ0gsWUFBQSxJQUFBLEdBQU8sUUFBUCxDQURHO1dBQUEsTUFBQTtBQUdILFlBQUEsSUFBQSxHQUFPLFNBQVAsQ0FIRztXQUZMO0FBQUEsVUFPQSxNQUFNLENBQUMsR0FBUCxHQUFjLEdBQUEsR0FBRyxJQUFILEdBQVEsR0FBUixHQUFXLE1BQU0sQ0FBQyxHQVBoQyxDQURGO1NBQUE7ZUFVQSxPQVhPO01BQUEsQ0FBVDtNQUQ2QjtFQUFBLENBQWhDLEVBOUZjO0FBQUEsQ0FBbEIsQ0FUQSxDQUFBOztBQUFBLFVBcUhVLENBQUMsR0FBWCxDQUFlLFNBQUMsTUFBRCxHQUFBO1NBQ2IsTUFBTSxDQUFDLEVBQVAsQ0FBVSxVQUFWLEVBRGE7QUFBQSxDQUFmLENBckhBLENBQUE7O0FBQUEsVUF3SFUsQ0FBQyxHQUFYLENBQWUsU0FBQyxVQUFELEVBQWEsSUFBYixHQUFBO1NBQ2IsVUFBVSxDQUFDLElBQVgsR0FBa0IsS0FETDtBQUFBLENBQWYsQ0F4SEEsQ0FBQTs7QUFBQSxVQTJIVSxDQUFDLE9BQVgsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBQyxhQUFELEdBQUE7U0FDM0IsYUFBQSxDQUFBLEVBRDJCO0FBQUEsQ0FBN0IsQ0EzSEEsQ0FBQTs7QUFBQSxVQThIVSxDQUFDLE9BQVgsQ0FBbUIsTUFBbkIsRUFBMkIsU0FBQyxNQUFELEdBQUE7QUFDekIsTUFBQSxPQUFBO0FBQUEsRUFBQSxPQUFBLEdBQ0U7QUFBQSxJQUFBLElBQUEsRUFBTSxFQUFOO0FBQUEsSUFDQSxJQUFBLEVBQU0sU0FBQyxTQUFELEdBQUE7YUFDSixDQUFDLENBQUMsSUFBRixDQUFPLE9BQU8sQ0FBQyxJQUFmLEVBQXFCLFNBQUMsR0FBRCxHQUFBO2VBQ25CLEdBQUcsQ0FBQyxTQUFKLEtBQWlCLFVBREU7TUFBQSxDQUFyQixFQURJO0lBQUEsQ0FETjtHQURGLENBQUE7QUFBQSxFQU1BLE1BQU0sQ0FBQyxFQUFQLENBQVUsTUFBVixFQUFrQixTQUFDLElBQUQsR0FBQTtXQUNoQixPQUFPLENBQUMsSUFBUixHQUFlLEtBREM7RUFBQSxDQUFsQixDQU5BLENBQUE7U0FTQSxRQVZ5QjtBQUFBLENBQTNCLENBOUhBLENBQUE7O0FBQUEsVUEwSVUsQ0FBQyxVQUFYLENBQXNCLFVBQXRCLEVBQWtDLFNBQUMsTUFBRCxHQUFBLENBQWxDLENBMUlBLENBQUE7O0FBQUEsVUE0SVUsQ0FBQyxVQUFYLENBQXNCLGFBQXRCLEVBQXFDLFNBQUMsTUFBRCxHQUFBO0FBQ25DLEVBQUEsTUFBTSxDQUFDLEtBQVAsR0FBbUIsSUFBQSxLQUFBLENBQUEsQ0FBbkIsQ0FBQTtBQUFBLEVBQ0EsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLENBQWtCO0FBQUEsSUFBQSxHQUFBLEVBQUssb0JBQUw7R0FBbEIsQ0FEQSxDQUFBO0FBQUEsRUFFQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsQ0FBa0I7QUFBQSxJQUFBLEdBQUEsRUFBSyw0Q0FBTDtHQUFsQixDQUZBLENBQUE7QUFBQSxFQUdBLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBYixDQUFrQjtBQUFBLElBQUEsR0FBQSxFQUFLLDRDQUFMO0dBQWxCLENBSEEsQ0FBQTtTQUlBLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBYixDQUFrQjtBQUFBLElBQUEsR0FBQSxFQUFLLDRDQUFMO0dBQWxCLEVBTG1DO0FBQUEsQ0FBckMsQ0E1SUEsQ0FBQTs7QUFBQSxVQW1KVSxDQUFDLFVBQVgsQ0FBc0IsV0FBdEIsRUFBbUMsU0FBQyxNQUFELEdBQUEsQ0FBbkMsQ0FuSkEsQ0FBQTs7QUFBQSxVQXFKVSxDQUFDLFVBQVgsQ0FBc0IsU0FBdEIsRUFBaUMsU0FBQyxNQUFELEdBQUEsQ0FBakMsQ0FySkEsQ0FBQTs7QUFBQSxVQXVKVSxDQUFDLFVBQVgsQ0FBc0IsU0FBdEIsRUFBaUMsU0FBQyxNQUFELEdBQUEsQ0FBakMsQ0F2SkEsQ0FBQTs7QUFBQSxVQXlKVSxDQUFDLFVBQVgsQ0FBc0IscUJBQXRCLEVBQTZDLFNBQUMsTUFBRCxHQUFBLENBQTdDLENBekpBLENBQUE7O0FBQUEsVUEySlUsQ0FBQyxVQUFYLENBQXNCLHdCQUF0QixFQUFnRCxTQUFDLE1BQUQsR0FBQSxDQUFoRCxDQTNKQSxDQUFBOztBQUFBLFVBNkpVLENBQUMsVUFBWCxDQUFzQixvQkFBdEIsRUFBNEMsU0FBQyxNQUFELEdBQUEsQ0FBNUMsQ0E3SkEsQ0FBQTs7QUFBQSxVQStKVSxDQUFDLFVBQVgsQ0FBc0IsV0FBdEIsRUFBbUMsU0FBQyxNQUFELEdBQUEsQ0FBbkMsQ0EvSkEsQ0FBQTs7QUFBQSxVQWlLVSxDQUFDLFVBQVgsQ0FBc0IsYUFBdEIsRUFBcUMsU0FBQyxNQUFELEdBQUEsQ0FBckMsQ0FqS0EsQ0FBQTs7QUFBQSxVQW1LVSxDQUFDLFVBQVgsQ0FBc0IsZ0JBQXRCLEVBQXdDLFNBQUMsTUFBRCxHQUFBLENBQXhDLENBbktBLENBQUE7O0FBQUEsVUFxS1UsQ0FBQyxVQUFYLENBQXNCLGdCQUF0QixFQUF3QyxTQUFDLE1BQUQsR0FBQSxDQUF4QyxDQXJLQSxDQUFBOztBQUFBLFVBdUtVLENBQUMsVUFBWCxDQUFzQixxQkFBdEIsRUFBNkMsU0FBQyxNQUFELEdBQUEsQ0FBN0MsQ0F2S0EsQ0FBQTs7QUFBQSxVQXlLVSxDQUFDLFVBQVgsQ0FBc0IsVUFBdEIsRUFBa0MsU0FBQyxNQUFELEVBQVMsSUFBVCxHQUFBO1NBQ2hDLE1BQU0sQ0FBQyxNQUFQLENBQWMsQ0FBQyxTQUFBLEdBQUE7V0FBRyxJQUFJLENBQUMsS0FBUjtFQUFBLENBQUQsQ0FBZCxFQUE4QixTQUFBLEdBQUE7V0FDNUIsTUFBTSxDQUFDLElBQVAsR0FBYyxJQUFJLENBQUMsS0FEUztFQUFBLENBQTlCLEVBRGdDO0FBQUEsQ0FBbEMsQ0F6S0EsQ0FBQTs7QUFBQSxVQTZLVSxDQUFDLFVBQVgsQ0FBc0IsU0FBdEIsRUFBaUMsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLFlBQWYsRUFBNkIsUUFBN0IsRUFBdUMsSUFBdkMsR0FBQTtBQUMvQixFQUFBLE1BQU0sQ0FBQyxLQUFQLEdBQWtCLFlBQVksQ0FBQyxJQUFoQixHQUEwQixZQUFZLENBQUMsSUFBYixHQUFrQixDQUE1QyxHQUFtRCxDQUFsRSxDQUFBO0FBQUEsRUFFQSxNQUFNLENBQUMsTUFBUCxDQUFjLENBQUMsU0FBQSxHQUFBO1dBQUcsSUFBSSxDQUFDLEtBQVI7RUFBQSxDQUFELENBQWQsRUFBOEIsU0FBQSxHQUFBO0FBQzVCLElBQUEsTUFBTSxDQUFDLEdBQVAsR0FBYSxJQUFJLENBQUMsSUFBTCxDQUFVLFlBQVksQ0FBQyxTQUF2QixDQUFiLENBQUE7QUFDQSxJQUFBLElBQUcsTUFBTSxDQUFDLEdBQVY7QUFDRSxNQUFBLE1BQU0sQ0FBQyxJQUFQLEdBQWMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFNLENBQUEsTUFBTSxDQUFDLEtBQVAsQ0FBL0IsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFaLEdBQWtCLElBQUksQ0FBQyxrQkFBTCxDQUF3QixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQXBDLENBRGxCLENBQUE7QUFHQSxNQUFBLElBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFaLEtBQW9CLFFBQXZCO0FBQ0UsUUFBQSxNQUFNLENBQUMsWUFBUCxHQUFzQixDQUF0QixDQUFBO0FBQUEsUUFDQSxNQUFNLENBQUMsUUFBUCxHQUFrQixFQURsQixDQUFBO2VBRUEsUUFBQSxDQUFTLE1BQU0sQ0FBQyxXQUFoQixFQUE2QixJQUE3QixFQUhGO09BSkY7S0FGNEI7RUFBQSxDQUE5QixDQUZBLENBQUE7U0FhQSxNQUFNLENBQUMsWUFBUCxHQUFzQixTQUFBLEdBQUE7QUFDcEIsSUFBQSxJQUFHLE1BQU0sQ0FBQyxJQUFWO2FBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFaLEdBQW9CLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BRHZDO0tBRG9CO0VBQUEsRUFkUztBQUFBLENBQWpDLENBN0tBLENBQUE7O0FBQUEsVUErTFUsQ0FBQyxTQUFYLENBQXFCLE9BQXJCLEVBQThCLFNBQUEsR0FBQTtTQUM1QjtBQUFBLElBQUEsUUFBQSxFQUFVLEdBQVY7QUFBQSxJQUNBLFFBQUEsRUFBVSxJQURWO0FBQUEsSUFFQSxJQUFBLEVBQU0sU0FBQyxLQUFELEVBQVEsT0FBUixFQUFpQixLQUFqQixHQUFBO0FBQ0osTUFBQSxVQUFBLENBQVcsQ0FBQyxTQUFBLEdBQUE7QUFDVixRQUFBLENBQUEsQ0FBRSxPQUFGLENBQVUsQ0FBQyxLQUFYLENBQ0U7QUFBQSxVQUFBLEVBQUEsRUFBUSxNQUFSO0FBQUEsVUFDQSxLQUFBLEVBQVEsTUFEUjtBQUFBLFVBRUEsT0FBQSxFQUFTLENBRlQ7QUFBQSxVQUdBLElBQUEsRUFBUSxRQUhSO0FBQUEsVUFJQSxJQUFBLEVBQVEsUUFKUjtTQURGLENBQUEsQ0FEVTtNQUFBLENBQUQsQ0FBWCxFQVNHLENBVEgsQ0FBQSxDQURJO0lBQUEsQ0FGTjtJQUQ0QjtBQUFBLENBQTlCLENBL0xBLENBQUE7O0FDRUEsT0FBTyxDQUFDLE1BQVIsQ0FBZSxpQkFBZixFQUFrQyxFQUFsQyxDQUFBLENBQUE7O0FDRkEsT0FBTyxDQUFDLE1BQVIsQ0FBZSxnQkFBZixFQUFpQyxFQUFqQyxDQUNFLENBQUMsU0FESCxDQUNhLFFBRGIsRUFDdUIsU0FBQSxHQUFBO1NBQ25CO0FBQUEsSUFBQSxRQUFBLEVBQVUsR0FBVjtBQUFBLElBQ0EsSUFBQSxFQUFNLFNBQUEsR0FBQTthQUNKLE1BQU0sQ0FBQyxJQUFQLENBQUEsRUFESTtJQUFBLENBRE47SUFEbUI7QUFBQSxDQUR2QixDQU1FLENBQUMsT0FOSCxDQU1XLE1BTlgsRUFNbUIsU0FBQyxJQUFELEdBQUE7QUFDZixNQUFBLGlCQUFBO0FBQUEsRUFBQSxJQUFBLEdBQ0U7QUFBQSxJQUFBLEtBQUEsRUFDRTtBQUFBLE1BQUEsT0FBQSxFQUFTLGdEQUFUO0FBQUEsTUFDQSxXQUFBLEVBQWEsd01BRGI7QUFBQSxNQUVBLElBQUEsRUFBTSxpcUJBRk47S0FERjtBQUFBLElBSUEsSUFBQSxFQUNFO0FBQUEsTUFBQSxPQUFBLEVBQVMsRUFBVDtBQUFBLE1BQ0EsSUFBQSxFQUNFO0FBQUEsUUFBQSxTQUFBLEVBQVcsRUFBWDtBQUFBLFFBQ0EsU0FBQSxFQUFXLEVBRFg7T0FGRjtLQUxGO0dBREYsQ0FBQTtBQUFBLEVBYUEsV0FBQSxHQUFjLFNBQUMsTUFBRCxHQUFBO1dBQ1osQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUFQLEVBQWUsU0FBQyxHQUFELEVBQU0sR0FBTixHQUFBO0FBQ2IsY0FBTyxNQUFBLENBQUEsR0FBUDtBQUFBLGFBQ08sUUFEUDtpQkFFSSxJQUFJLENBQUMsV0FBTCxDQUFpQixHQUFqQixFQUZKO0FBQUEsYUFHTyxRQUhQO2lCQUlJLFdBQUEsQ0FBWSxHQUFaLEVBSko7QUFBQSxPQURhO0lBQUEsQ0FBZixFQURZO0VBQUEsQ0FiZCxDQUFBO0FBQUEsRUFxQkEsV0FBQSxDQUFZLElBQVosQ0FyQkEsQ0FBQTtTQXVCQSxLQXhCZTtBQUFBLENBTm5CLENBQUEsQ0FBQTs7QUNBQSxJQUFBLG9CQUFBOztBQUFBLElBQUcsTUFBTSxDQUFDLE9BQVAsQ0FBQSxDQUFIO0FBQUE7Q0FBQSxNQUVLLElBQUcsTUFBTSxDQUFDLE1BQVAsQ0FBQSxDQUFIO0FBRUosRUFBQSxDQUFBLEdBQUksUUFBSixDQUFBO0FBQUEsRUFDQSxLQUFBLEdBQVEsT0FEUixDQUFBO0FBRUEsRUFBQSxJQUFHLENBQUEsQ0FBRSxDQUFDLGNBQUYsQ0FBaUIsS0FBakIsQ0FBSjtBQUNJLElBQUEsSUFBQSxHQUFRLENBQUMsQ0FBQyxvQkFBRixDQUF1QixNQUF2QixDQUErQixDQUFBLENBQUEsQ0FBdkMsQ0FBQTtBQUFBLElBQ0EsSUFBQSxHQUFRLENBQUMsQ0FBQyxhQUFGLENBQWdCLE1BQWhCLENBRFIsQ0FBQTtBQUFBLElBRUEsSUFBSSxDQUFDLEVBQUwsR0FBWSxLQUZaLENBQUE7QUFBQSxJQUdBLElBQUksQ0FBQyxHQUFMLEdBQVksWUFIWixDQUFBO0FBQUEsSUFJQSxJQUFJLENBQUMsSUFBTCxHQUFZLFVBSlosQ0FBQTtBQUFBLElBS0EsSUFBSSxDQUFDLElBQUwsR0FBWSxpRUFMWixDQUFBO0FBQUEsSUFNQSxJQUFJLENBQUMsS0FBTCxHQUFhLEtBTmIsQ0FBQTtBQUFBLElBT0EsSUFBSSxDQUFDLFdBQUwsQ0FBaUIsSUFBakIsQ0FQQSxDQURKO0dBSkk7Q0FGTCIsImZpbGUiOiJhcHBsaWNhdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmIGRldmljZS5kZXNrdG9wKClcbiAgd2luZG93LlRhcGNlbnRpdmUgPSBhbmd1bGFyLm1vZHVsZSgnVGFwY2VudGl2ZScsIFsnbmdTYW5pdGl6ZScsICd1aS5yb3V0ZXInLCAnYnRmb3JkLnNvY2tldC1pbycsICd0YXAuY29udHJvbGxlcnMnLCAndGFwLmRpcmVjdGl2ZXMnXSlcblxuZWxzZVxuICB3aW5kb3cuVGFwY2VudGl2ZSA9IGFuZ3VsYXIubW9kdWxlKFwiVGFwY2VudGl2ZVwiLCBbIFwiaW9uaWNcIiwgXCJidGZvcmQuc29ja2V0LWlvXCIsIFwidGFwLmNvbnRyb2xsZXJzXCIsICd0YXAuZGlyZWN0aXZlcyddKVxuICAgIC5ydW4gKCRpb25pY1BsYXRmb3JtKSAtPlxuICAgICAgJGlvbmljUGxhdGZvcm0ucmVhZHkgLT5cbiAgICAgICAgU3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpIGlmIHdpbmRvdy5TdGF0dXNCYXJcblxuVGFwY2VudGl2ZS5jb25maWcgKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSAtPlxuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSAnYXBwJyxcbiAgICAgIHVybDogJydcbiAgICAgIGFic3RyYWN0OiB0cnVlXG4gICAgICBjb250cm9sbGVyOiAnQXBwQ3RybCdcbiAgICAgIHRlbXBsYXRlVXJsOiAnbWVudS5odG1sJ1xuXG4gICAgLnN0YXRlICdhcHAuaG9tZScsXG4gICAgICB1cmw6ICcvJ1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCdcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2hvbWUuaHRtbCdcblxuICAgIC5zdGF0ZSAnYXBwLmRvY3MnLFxuICAgICAgdXJsOiAnL2RvY3MnXG4gICAgICB2aWV3czpcbiAgICAgICAgbWVudUNvbnRlbnQ6XG4gICAgICAgICAgY29udHJvbGxlcjogJ0RvY3NDdHJsJ1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZG9jcy9pbmRleC5odG1sJ1xuXG4gICAgLnN0YXRlICdhcHAuYWJvdXQnLFxuICAgICAgdXJsOiAnL2Fib3V0J1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dEN0cmwnXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdhYm91dC5odG1sJ1xuXG4gICAgLnN0YXRlICdhcHAuaG93JyxcbiAgICAgIHVybDogJy9ob3cnXG4gICAgICB2aWV3czpcbiAgICAgICAgbWVudUNvbnRlbnQ6XG4gICAgICAgICAgY29udHJvbGxlcjogJ0hvd0N0cmwnXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdob3cuaHRtbCdcblxuICAgIC5zdGF0ZSAnYXBwLnBsYXRmb3JtLXRvdWNocG9pbnRzJyxcbiAgICAgIHVybDogJy9iZWFjb24tYmxlLW5mYy1jb25uZWN0ZWQtdG91Y2hwb2ludCdcbiAgICAgIHZpZXdzOlxuICAgICAgICBtZW51Q29udGVudDpcbiAgICAgICAgICBjb250cm9sbGVyOiAnUGxhdGZvcm1Ub3VjaHBvaW50Q3RybCdcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BsYXRmb3JtLXRvdWNocG9pbnRzLmh0bWwnXG5cbiAgICAuc3RhdGUgJ2FwcC5wbGF0Zm9ybS1tb2JpbGUnLFxuICAgICAgdXJsOiAnL2JlYWNvbi1ibGUtbmZjLW1vYmlsZS1hcGktc2RrJ1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGF0Zm9ybU1vYmlsZUN0cmwnXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdwbGF0Zm9ybS1tb2JpbGUuaHRtbCdcblxuICAgIC5zdGF0ZSAnYXBwLnBsYXRmb3JtLW1hbmFnZXInLFxuICAgICAgdXJsOiAnL3RhcGNlbnRpdmUtYmVhY29uLW5mYy1jbG91ZC1tYW5hZ2VyJ1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGF0Zm9ybU1hbmFnZXJDdHJsJ1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGxhdGZvcm0tbWFuYWdlci5odG1sJ1xuXG4gICAgLnN0YXRlICdhcHAuYmxvZycsXG4gICAgICB1cmw6ICcvYmxvZydcbiAgICAgIHZpZXdzOlxuICAgICAgICBtZW51Q29udGVudDpcbiAgICAgICAgICBjb250cm9sbGVyOiAnQmxvZ0N0cmwnXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdibG9nLmh0bWwnXG5cbiAgICAuc3RhdGUgJ2FwcC5wcmVzcycsXG4gICAgICB1cmw6ICcvcHJlc3MnXG4gICAgICB2aWV3czpcbiAgICAgICAgbWVudUNvbnRlbnQ6XG4gICAgICAgICAgY29udHJvbGxlcjogJ1ByZXNzQ3RybCdcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByZXNzLmh0bWwnXG5cbiAgICAuc3RhdGUgJ2FwcC5jb250YWN0JyxcbiAgICAgIHVybDogJy9jb250YWN0J1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250YWN0Q3RybCdcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRhY3QuaHRtbCdcblxuICAgIC5zdGF0ZSAnYXBwLmRvYycsXG4gICAgICB1cmw6ICcvZG9jcy86cGVybWFsaW5rJ1xuICAgICAgdmlld3M6XG4gICAgICAgIG1lbnVDb250ZW50OlxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdEb2NDdHJsJ1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZG9jcy9zaG93Lmh0bWwnXG5cbiAgICAuc3RhdGUgJ2FwcC5zdGVwJyxcbiAgICAgIHVybDogJy9kb2NzLzpwZXJtYWxpbmsvOnN0ZXAnXG4gICAgICB2aWV3czpcbiAgICAgICAgbWVudUNvbnRlbnQ6XG4gICAgICAgICAgY29udHJvbGxlcjogJ0RvY0N0cmwnXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdkb2NzL3Nob3cuaHRtbCdcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UgXCIvXCJcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2ggLT5cbiAgICAgICByZXF1ZXN0OiAoY29uZmlnKSAtPlxuICAgICAgICAgaWYgY29uZmlnLnVybC5tYXRjaCgvXFwuaHRtbCQvKSAmJiAhY29uZmlnLnVybC5tYXRjaCgvXnNoYXJlZFxcLy8pXG4gICAgICAgICAgIGlmIGRldmljZS50YWJsZXQoKVxuICAgICAgICAgICAgIHR5cGUgPSAndGFibGV0J1xuICAgICAgICAgICBlbHNlIGlmIGRldmljZS5tb2JpbGUoKVxuICAgICAgICAgICAgIHR5cGUgPSAnbW9iaWxlJ1xuICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgdHlwZSA9ICdkZXNrdG9wJ1xuXG4gICAgICAgICAgIGNvbmZpZy51cmwgPSBcIi8je3R5cGV9LyN7Y29uZmlnLnVybH1cIlxuXG4gICAgICAgICBjb25maWdcblxuVGFwY2VudGl2ZS5ydW4gKCRzdGF0ZSkgLT5cbiAgJHN0YXRlLmdvKCdhcHAuaG9tZScpXG5cblRhcGNlbnRpdmUucnVuICgkcm9vdFNjb3BlLCBjb3B5KSAtPlxuICAkcm9vdFNjb3BlLmNvcHkgPSBjb3B5XG5cblRhcGNlbnRpdmUuZmFjdG9yeSAnU29ja2V0JywgKHNvY2tldEZhY3RvcnkpIC0+XG4gIHNvY2tldEZhY3RvcnkoKVxuXG5UYXBjZW50aXZlLmZhY3RvcnkgJ0RvY3MnLCAoU29ja2V0KSAtPlxuICBzZXJ2aWNlID1cbiAgICBsaXN0OiBbXVxuICAgIGZpbmQ6IChwZXJtYWxpbmspIC0+XG4gICAgICBfLmZpbmQgc2VydmljZS5saXN0LCAoZG9jKSAtPlxuICAgICAgICBkb2MucGVybWFsaW5rID09IHBlcm1hbGlua1xuXG4gIFNvY2tldC5vbiAnZG9jcycsIChkb2NzKSAtPlxuICAgIHNlcnZpY2UubGlzdCA9IGRvY3NcblxuICBzZXJ2aWNlXG5cblRhcGNlbnRpdmUuY29udHJvbGxlciAnSG9tZUN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgXCJIb21lVGFwQ3RybFwiLCAoJHNjb3BlKSAtPlxuICAkc2NvcGUuaXRlbXMgPSBuZXcgQXJyYXkoKVxuICAkc2NvcGUuaXRlbXMucHVzaCBzcmM6IFwiaW1nL2dpZi9yZXBvcnQuZ2lmXCJcbiAgJHNjb3BlLml0ZW1zLnB1c2ggc3JjOiBcImh0dHA6Ly9tYWxzdXAuZ2l0aHViLmNvbS9pbWFnZXMvYmVhY2gyLmpwZ1wiXG4gICRzY29wZS5pdGVtcy5wdXNoIHNyYzogXCJodHRwOi8vbWFsc3VwLmdpdGh1Yi5jb20vaW1hZ2VzL2JlYWNoMy5qcGdcIlxuICAkc2NvcGUuaXRlbXMucHVzaCBzcmM6IFwiaHR0cDovL21hbHN1cC5naXRodWIuY29tL2ltYWdlcy9iZWFjaDQuanBnXCJcblxuVGFwY2VudGl2ZS5jb250cm9sbGVyICdBYm91dEN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ0hvd0N0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ0FwcEN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ1BsYXRmb3JtTWFuYWdlckN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ1BsYXRmb3JtVG91Y2hwb2ludEN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ1BsYXRmb3JtTW9iaWxlQ3RybCcsICgkc2NvcGUpIC0+XG5cblRhcGNlbnRpdmUuY29udHJvbGxlciAnUHJlc3NDdHJsJywgKCRzY29wZSkgLT5cblxuVGFwY2VudGl2ZS5jb250cm9sbGVyICdDb250YWN0Q3RybCcsICgkc2NvcGUpIC0+XG5cblRhcGNlbnRpdmUuY29udHJvbGxlciAnR2V0U3RhcnRlZEN0cmwnLCAoJHNjb3BlKSAtPlxuXG5UYXBjZW50aXZlLmNvbnRyb2xsZXIgJ0RldmVsb3BlcnNDdHJsJywgKCRzY29wZSkgLT5cblxuVGFwY2VudGl2ZS5jb250cm9sbGVyICdEZXZlbG9wZXJDZW50ZXJDdHJsJywgKCRzY29wZSkgLT5cblxuVGFwY2VudGl2ZS5jb250cm9sbGVyICdEb2NzQ3RybCcsICgkc2NvcGUsIERvY3MpIC0+XG4gICRzY29wZS4kd2F0Y2ggKC0+IERvY3MubGlzdCksIC0+XG4gICAgJHNjb3BlLmRvY3MgPSBEb2NzLmxpc3RcblxuVGFwY2VudGl2ZS5jb250cm9sbGVyICdEb2NDdHJsJywgKCRzY29wZSwgJHNjZSwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgRG9jcykgLT5cbiAgJHNjb3BlLmluZGV4ID0gaWYgJHN0YXRlUGFyYW1zLnN0ZXAgdGhlbiAkc3RhdGVQYXJhbXMuc3RlcC0xIGVsc2UgMFxuXG4gICRzY29wZS4kd2F0Y2ggKC0+IERvY3MubGlzdCksIC0+XG4gICAgJHNjb3BlLmRvYyA9IERvY3MuZmluZCgkc3RhdGVQYXJhbXMucGVybWFsaW5rKVxuICAgIGlmICRzY29wZS5kb2NcbiAgICAgICRzY29wZS5zdGVwID0gJHNjb3BlLmRvYy5zdGVwc1skc2NvcGUuaW5kZXhdXG4gICAgICAkc2NvcGUuc3RlcC51cmwgPSAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCgkc2NvcGUuc3RlcC51cmwpXG5cbiAgICAgIGlmICRzY29wZS5zdGVwLnR5cGUgPT0gJ2RpYWxvZydcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VJbmRleCA9IDBcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW11cbiAgICAgICAgJHRpbWVvdXQoJHNjb3BlLm5leHRNZXNzYWdlLCAxMDAwKVxuXG4gICRzY29wZS5oYXNNb3JlU3RlcHMgPSAtPlxuICAgIGlmICRzY29wZS5zdGVwXG4gICAgICAkc2NvcGUuc3RlcC5pbmRleCA8ICRzY29wZS5kb2Muc3RlcHMubGVuZ3RoXG5cblRhcGNlbnRpdmUuZGlyZWN0aXZlICdjeWNsZScsIC0+XG4gIHJlc3RyaWN0OiAnQSdcbiAgcHJpb3JpdHk6IDEwMDFcbiAgbGluazogKHNjb3BlLCBlbGVtZW50LCBhdHRycykgLT5cbiAgICBzZXRUaW1lb3V0ICgtPlxuICAgICAgJChlbGVtZW50KS5jeWNsZVxuICAgICAgICBmeDogICAgICdmYWRlJywgXG4gICAgICAgIHNwZWVkOiAgJ2Zhc3QnLCBcbiAgICAgICAgdGltZW91dDogMCwgXG4gICAgICAgIG5leHQ6ICAgJyNuZXh0MicsIFxuICAgICAgICBwcmV2OiAgICcjcHJldjInXG5cbiAgICAgIHJldHVyblxuICAgICksIDBcbiAgICByZXR1cm5cbiIsIlxuIyBub3Qgc3VyZSBpZiB0aGVzZSBhcmUgYWN0dWFsbHkgaW5qZWN0aW5nIGludG8gdGhlIGFwcCBtb2R1bGUgcHJvcGVybHlcbmFuZ3VsYXIubW9kdWxlKFwidGFwLmNvbnRyb2xsZXJzXCIsIFtdKVxuXG4jIG1vdmUgY29udHJvbGxlcnMgaGVyZVxuXG5cblxuXG4iLCJhbmd1bGFyLm1vZHVsZShcInRhcC5kaXJlY3RpdmVzXCIsIFtdKVxuICAuZGlyZWN0aXZlIFwiZGV2aWNlXCIsIC0+XG4gICAgcmVzdHJpY3Q6IFwiQVwiXG4gICAgbGluazogLT5cbiAgICAgIGRldmljZS5pbml0KClcblxuICAuc2VydmljZSAnY29weScsICgkc2NlKSAtPlxuICAgIGNvcHkgPVxuICAgICAgYWJvdXQ6XG4gICAgICAgIGhlYWRpbmc6IFwiV2UncmUgPHN0cm9uZz50YXBwaW5nPC9zdHJvbmc+IGludG8gdGhlIGZ1dHVyZVwiXG4gICAgICAgIHN1Yl9oZWFkaW5nOiBcIlRhcGNlbnRpdmUgd2FzIGNyZWF0ZWQgYnkgYSB0ZWFtIHRoYXQgaGFzIGxpdmVkIHRoZSBtb2JpbGUgY29tbWVyY2UgcmV2b2x1dGlvbiBmcm9tIHRoZSBlYXJsaWVzdCBkYXlzIG9mIG1Db21tZXJjZSB3aXRoIFdBUCwgdG8gbGVhZGluZyB0aGUgY2hhcmdlIGluIG1vYmlsZSBwYXltZW50cyBhbmQgc2VydmljZXMgd2l0aCBORkMgd29ybGR3aWRlLlwiXG4gICAgICAgIGNvcHk6IFwiPHA+Rm9yIHVzLCBtb2JpbGUgY29tbWVyY2UgaGFzIGFsd2F5cyBiZWVuIGFib3V0IG11Y2ggbW9yZSB0aGFuIHBheW1lbnQ6ICBtYXJrZXRpbmcsIHByb21vdGlvbnMsIHByb2R1Y3QgY29udGVudCwgYW5kIGxveWFsdHksIGFsbCBjb21lIHRvIGxpZmUgaW5zaWRlIGEgbW9iaWxlIHBob25lLiBNb2JpbGUgY29tbWVyY2UgcmVhbGx5IGdldHMgaW50ZXJlc3Rpbmcgd2hlbiBpdCBicmlkZ2VzIHRoZSBkaWdpdGFsIGFuZCBwaHlzaWNhbCB3b3JsZHMuPC9wPjxwPk91ciBnb2FsIGF0IFRhcGNlbnRpdmUgaXMgdG8gY3JlYXRlIGEgc3RhdGUtb2YtdGhlLWFydCBtb2JpbGUgZW5nYWdlbWVudCBwbGF0Zm9ybSB0aGF0IGVuYWJsZXMgbWFya2V0ZXJzIGFuZCBkZXZlbG9wZXJzIHRvIGNyZWF0ZSBlbnRpcmVseSBuZXcgY3VzdG9tZXIgZXhwZXJpZW5jZXMgaW4gcGh5c2ljYWwgbG9jYXRpb25zIOKAkyBhbGwgd2l0aCBhIG1pbmltdW0gYW1vdW50IG9mIHRlY2hub2xvZ3kgZGV2ZWxvcG1lbnQuPC9wPjxwPldlIHRoaW5rIHlvdeKAmWxsIGxpa2Ugd2hhdCB3ZeKAmXZlIGJ1aWx0IHNvIGZhci4gQW5kIGp1c3QgYXMgbW9iaWxlIHRlY2hub2xvZ3kgaXMgY29uc3RhbnRseSBldm9sdmluZywgc28gaXMgdGhlIFRhcGNlbnRpdmUgcGxhdGZvcm0uIEdpdmUgaXQgYSB0ZXN0IGRyaXZlIHRvZGF5LjwvcD5cIlxuICAgICAgdGVhbTpcbiAgICAgICAgaGVhZGluZzogXCJcIlxuICAgICAgICBiaW9zOlxuICAgICAgICAgIGRhdmVfcm9sZTogXCJcIlxuICAgICAgICAgIGRhdmVfY29weTogXCJcIlxuICAgIFxuXG5cbiAgICB0cnVzdFZhbHVlcyA9ICh2YWx1ZXMpIC0+XG4gICAgICBfLmVhY2ggdmFsdWVzLCAodmFsLCBrZXkpIC0+XG4gICAgICAgIHN3aXRjaCB0eXBlb2YodmFsKVxuICAgICAgICAgIHdoZW4gJ3N0cmluZydcbiAgICAgICAgICAgICRzY2UudHJ1c3RBc0h0bWwodmFsKVxuICAgICAgICAgIHdoZW4gJ29iamVjdCdcbiAgICAgICAgICAgIHRydXN0VmFsdWVzKHZhbClcblxuICAgIHRydXN0VmFsdWVzKGNvcHkpXG5cbiAgICBjb3B5XG4iLCJpZiBkZXZpY2UuZGVza3RvcCgpXG5cbmVsc2UgaWYgZGV2aWNlLm1vYmlsZSgpXG5cblx0JCA9IGRvY3VtZW50ICMgc2hvcnRjdXRcblx0Y3NzSWQgPSAnbXlDc3MnICMgeW91IGNvdWxkIGVuY29kZSB0aGUgY3NzIHBhdGggaXRzZWxmIHRvIGdlbmVyYXRlIGlkLi5cblx0aWYgISQuZ2V0RWxlbWVudEJ5SWQoY3NzSWQpXG5cdCAgICBoZWFkICA9ICQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXVxuXHQgICAgbGluayAgPSAkLmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKVxuXHQgICAgbGluay5pZCAgID0gY3NzSWRcblx0ICAgIGxpbmsucmVsICA9ICdzdHlsZXNoZWV0J1xuXHQgICAgbGluay50eXBlID0gJ3RleHQvY3NzJ1xuXHQgICAgbGluay5ocmVmID0gJ2h0dHBzOi8vY29kZS5pb25pY2ZyYW1ld29yay5jb20vMS4wLjAtYmV0YS4xMy9jc3MvaW9uaWMubWluLmNzcydcblx0ICAgIGxpbmsubWVkaWEgPSAnYWxsJ1xuXHQgICAgaGVhZC5hcHBlbmRDaGlsZChsaW5rKVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9